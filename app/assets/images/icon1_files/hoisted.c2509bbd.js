import"./hoisted.747ddc7d.js";import{a as f,d as y}from"./index.ddd2b5a1.js";import{h as p}from"./index.b93551d5.js";import{v as E}from"./index.5c2931f1.js";import"./lazy.ec63ec52.js";import"./index.86e8ba5d.js";import"./preload-helper.e8d31950.js";function g(){import.meta.url,import("data:text/javascript,").catch(()=>1);async function*e(){}g.g=e}const m="_g6b",b="._q9b label",a={},_="sorry,there are some problems,please contract us...";document.addEventListener("down:prf",e=>{Object.assign(a,e.detail),L()});f("input","._q9b input[name]",function(){this.parentElement.querySelector("span").hidden=!!this.value});let c=null;f("click",b,function(){this.classList.add(m),c=this},()=>{c&&(c.classList.remove(m),c=null)});let u=!1;document.addEventListener("select:change",e=>{if(e.detail.name==="prfLicense"){u=e.detail.value=="1";const t=document.querySelector('input[name="prf_tax_id"]');t&&(t.parentElement.hidden=!u)}});f("click","._r9b",function(){const e=w();if(e){const n=a.isEdu?"eduPrfLicense":"prfLicense",t=document.querySelector('button[name="'.concat(n,'"]'));if(t&&!t.value){alert(t.textContent);return}this.disabled=!0;const o="/api/message/vrf-name"+(a.hasBuy?"-one":a.isTeam?"-team":""),d={name:e.prfRealName,address:e.prfAddress,tax_id:e.prf_tax_id,prf_license:t!=null&&t.value?+t.value:void 0,edu_email:e.eduEmail||void 0,...a.data};p.get(o,d).then(s=>{if(this.disabled=!1,s.status==404){alert(s.info||_);return}h(!1),s.status==1&&s.url&&v(s.url)}).catch(()=>{this.disabled=!1})}});function w(){const e=["prfRealName","prfAddress",u?"prf_tax_id":"",a.isEdu?"eduEmail":""],n=new Set,t={},i=/^[a-zA-Z0-9]+$/;for(const o of e){if(!o)continue;const d=document.querySelector('._q9b input[name="'.concat(o,'"]'));if(d){const s=d.parentElement,r=d.value.trim();let l=!r;o==="prf_tax_id"?r?(l=r.length<6||!i.test(r),l&&s.dataset.errTips&&setTimeout(()=>{alert(s.dataset.errTips)})):l=!1:o==="eduEmail"&&(r?(l=!E.isEmail(r),l&&s.dataset.errTips&&setTimeout(()=>{alert(s.dataset.errTips)})):l=!1),s.classList[l?"add":"remove"]("_vzb"),l?n.add(0):t[d.name]=r}}return n.size?null:t}function h(e){const n=a.isEdu==null?__PN_DATA__.enterprise_industry=="1":a.isEdu;a.isEdu=n,e&&(document.querySelectorAll('[name="eduPrfLicense"],[name="eduEmail"]').forEach(t=>{t.parentElement.hidden=!n}),document.querySelectorAll('[name="prfLicense"]').forEach(t=>{t.parentElement.hidden=n})),y(document,"dialog:toggle",{name:"prfActualName",show:e})}function v(e){const n=window._postdownfile;n&&n();const t=document.getElementById("down_prf_ifr");t?t.src=e:window.open(e)}async function L(){const e=a.data;if(!e)return;const t="/api/message/vrf-file"+(a.hasBuy?"-one":a.isTeam?"-team":"");p.get(t,{id:e.id||void 0,type:e.type||void 0,slidesdocs:e.slidesdocs||void 0,controller:e.controller}).then(i=>{if(i.status==404){alert(i.info||_);return}if(i.status==1&&i.url)v(i.url);else if(!a.isTeam&&i.status==2)alert("sorry, you cannot download personal PRF");else if(i.status!=3){if(i.name){const o=document.querySelector('input[name="prfRealName"]');o&&(o.value=i.name)}h(!0)}}).then(a.resolve).catch(a.reject).finally(()=>{delete a.resolve,delete a.reject})}export{g as __vite_legacy_guard};
